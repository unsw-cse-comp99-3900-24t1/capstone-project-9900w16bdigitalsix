definitions:
  forms.ChangePasswordForm:
    properties:
      email:
        type: string
      new_password:
        type: string
      old_password:
        type: string
    required:
    - email
    - new_password
    - old_password
    type: object
  forms.ChangeProjectCoordinatorRequest:
    properties:
      coorId:
        type: integer
      notification:
        $ref: '#/definitions/forms.Notification'
      projectId:
        type: integer
    required:
    - coorId
    - notification
    - projectId
    type: object
  forms.ChangeProjectTutorRequest:
    properties:
      notification:
        $ref: '#/definitions/forms.Notification'
      projectId:
        type: integer
      tutorId:
        type: integer
    required:
    - notification
    - projectId
    - tutorId
    type: object
  forms.CreateTeamForm:
    properties:
      user_id:
        type: integer
    required:
    - user_id
    type: object
  forms.JoinTeamForm:
    properties:
      teamIdShow:
        type: integer
      userId:
        type: integer
    required:
    - teamIdShow
    - userId
    type: object
  forms.ModifyUserRoleRequest:
    properties:
      notification:
        $ref: '#/definitions/forms.Notification'
      role:
        type: integer
      userId:
        type: integer
    required:
    - notification
    - role
    - userId
    type: object
  forms.Notification:
    properties:
      content:
        type: string
      to:
        $ref: '#/definitions/forms.NotificationTo'
    required:
    - content
    - to
    type: object
  forms.NotificationTo:
    properties:
      users:
        items:
          type: integer
        type: array
    required:
    - users
    type: object
  forms.NotificationToTeam:
    properties:
      teamId:
        type: integer
    required:
    - teamId
    type: object
  forms.PasswordLoginForm:
    properties:
      email:
        type: string
      password:
        maxLength: 20
        minLength: 3
        type: string
    required:
    - email
    - password
    type: object
  forms.PreferenceRequest:
    properties:
      projectId:
        type: integer
      reason:
        type: string
    required:
    - projectId
    - reason
    type: object
  forms.Profile:
    properties:
      avatarBase64:
        type: string
      bio:
        type: string
      field:
        type: string
      name:
        type: string
      organization:
        type: string
      role:
        type: integer
      skills:
        items:
          type: string
        type: array
      userId:
        type: integer
    type: object
  forms.ProfileRequest:
    properties:
      profile:
        $ref: '#/definitions/forms.Profile'
    required:
    - profile
    type: object
  forms.RegisterForm:
    properties:
      email:
        type: string
      password:
        maxLength: 20
        minLength: 3
        type: string
      password_confirm:
        type: string
      username:
        type: string
    required:
    - email
    - password
    - password_confirm
    - username
    type: object
  forms.ResetPasswordForm:
    properties:
      new_password:
        type: string
      new_password_confirm:
        type: string
      token:
        type: string
    required:
    - new_password
    - new_password_confirm
    - token
    type: object
  forms.SendEmailResetPwdForm:
    properties:
      email:
        type: string
    required:
    - email
    type: object
  forms.TeamNotification:
    properties:
      content:
        type: string
      to:
        $ref: '#/definitions/forms.NotificationToTeam'
    required:
    - content
    - to
    type: object
  forms.UpdateTeamProfileForm:
    properties:
      TeamSkills:
        items:
          type: string
        type: array
      teamName:
        type: string
    type: object
  response.AllocatedTeam:
    properties:
      teamId:
        type: integer
      teamName:
        type: string
    type: object
  response.CoorInfoResponse:
    properties:
      avatarURL:
        type: string
      coorId:
        type: integer
      email:
        type: string
      name:
        type: string
      role:
        type: integer
    type: object
  response.CreateTeamResponse:
    properties:
      teamId:
        type: integer
      teamIdShow:
        type: integer
      teamMember:
        items:
          $ref: '#/definitions/response.TeamMember'
        type: array
      teamName:
        type: string
    type: object
  response.GetProjectListResponse:
    properties:
      allocatedTeam:
        items:
          $ref: '#/definitions/response.AllocatedTeam'
        type: array
      clientEmail:
        type: string
      clientId:
        type: integer
      clientName:
        type: string
      coorEmail:
        type: string
      coorId:
        type: integer
      coorName:
        type: string
      field:
        type: string
      projectId:
        type: integer
      requiredSkills:
        items:
          type: string
        type: array
      title:
        type: string
      tutorEmail:
        type: string
      tutorId:
        type: integer
      tutorName:
        type: string
    type: object
  response.GetTeamProfileResponse:
    properties:
      teamId:
        type: integer
      teamIdShow:
        type: integer
      teamMember:
        items:
          $ref: '#/definitions/response.TeamMember'
        type: array
      teamName:
        type: string
      teamSkills:
        items:
          type: string
        type: array
    type: object
  response.JoinTeamResponse:
    properties:
      teamId:
        type: integer
      teamIdShow:
        type: integer
      teamMember:
        items:
          $ref: '#/definitions/response.TeamMember'
        type: array
      teamName:
        type: string
      teamSkills:
        items:
          type: string
        type: array
    type: object
  response.ModifyProjectDetailResponse:
    properties:
      createdBy:
        type: string
      createdByEmail:
        type: string
      createdByUserId:
        type: integer
      message:
        type: string
    type: object
  response.NotificationResponse:
    properties:
      content:
        type: string
      updatedAt:
        type: string
    type: object
  response.PreferenceResponse:
    properties:
      projectId:
        type: integer
      projectTitle:
        type: string
      reason:
        type: string
    type: object
  response.ProfileResponse:
    properties:
      avatarURL:
        type: string
      bio:
        type: string
      email:
        type: string
      field:
        type: string
      name:
        type: string
      organization:
        type: string
      role:
        type: integer
      skills:
        items:
          type: string
        type: array
      userId:
        type: integer
    type: object
  response.ProjectDetailResponse:
    properties:
      allocatedTeam:
        items:
          $ref: '#/definitions/response.AllocatedTeam'
        type: array
      clientEmail:
        type: string
      clientId:
        type: integer
      clientName:
        type: string
      coorEmail:
        type: string
      coorId:
        type: integer
      coorName:
        type: string
      description:
        type: string
      field:
        type: string
      projectId:
        type: integer
      requiredSkills:
        items:
          type: string
        type: array
      specLink:
        type: string
      title:
        type: string
      tutorEmail:
        type: string
      tutorId:
        type: integer
      tutorName:
        type: string
    type: object
  response.ProjectTeamMember:
    properties:
      avatarURL:
        type: string
      userId:
        type: integer
      userName:
        type: string
    type: object
  response.StudentInfoResponse:
    properties:
      avatarURL:
        type: string
      email:
        type: string
      id:
        type: integer
      name:
        type: string
    type: object
  response.StudentListResponse:
    properties:
      avatarURL:
        type: string
      email:
        type: string
      role:
        type: integer
      userId:
        type: integer
      userName:
        type: string
      userSkills:
        items:
          type: string
        type: array
    type: object
  response.TeamDetailResponse:
    properties:
      preferenceReason:
        type: string
      teamId:
        type: integer
      teamMember:
        items:
          $ref: '#/definitions/response.ProjectTeamMember'
        type: array
      teamName:
        type: string
      teamSkills:
        items:
          type: string
        type: array
    type: object
  response.TeamListResponse:
    properties:
      teamId:
        type: integer
      teamName:
        type: string
      teamSkills:
        items:
          type: string
        type: array
    type: object
  response.TeamMember:
    properties:
      avatarURL:
        type: string
      email:
        type: string
      userId:
        type: integer
      userName:
        type: string
      userSkills:
        items:
          type: string
        type: array
    type: object
  response.TutorInfoResponse:
    properties:
      avatarURL:
        type: string
      email:
        type: string
      name:
        type: string
      role:
        type: integer
      tutorId:
        type: integer
    type: object
  response.UserListResponse:
    properties:
      avatar:
        type: string
      email:
        type: string
      role:
        type: integer
      userId:
        type: integer
      userName:
        type: string
    type: object
info:
  contact: {}
paths:
  /v1/admin/change/project/coordinator:
    post:
      consumes:
      - application/json
      description: '修改 project coordinator，注意 header 需要 Authorization: Bearer <token>'
      parameters:
      - description: Bearer <token>
        in: header
        name: Authorization
        required: true
        type: string
      - description: 修改 coordinator 请求参数
        in: body
        name: ChangeProjectCoordinatorRequest
        required: true
        schema:
          $ref: '#/definitions/forms.ChangeProjectCoordinatorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg": "Project Coordinator updated successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: '{"error": "Please login"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": "Only admin have permission"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "Coordinator not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Failed to update coordinator"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update project coordinator
      tags:
      - Admin
  /v1/admin/change/project/tutor:
    post:
      consumes:
      - application/json
      description: '更新负责这个 project 的 tutor，注意 header 需要 Authorization: Bearer <token>'
      parameters:
      - description: Bearer <token>
        in: header
        name: Authorization
        required: true
        type: string
      - description: 修改 coordinator 请求参数
        in: body
        name: ChangeProjectTutorRequest
        required: true
        schema:
          $ref: '#/definitions/forms.ChangeProjectTutorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg": "Project tutor updated successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: '{"error": "Please login"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": "Only admin have permission"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "Tutor not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Failed to update tutor"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update project tutor
      tags:
      - Admin
  /v1/admin/get/coordinator/{projectId}:
    get:
      description: Get coordinator information by project ID
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.CoorInfoResponse'
        "400":
          description: '{"error": Invalid projectId}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "Project not found"}" or "{"error": "Coordinator
            not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get coordinator information by project ID
      tags:
      - Admin
  /v1/admin/get/coordinator/list:
    get:
      consumes:
      - application/json
      description: '注意 header  Authorization: Bearer <token>, 返回所有 Coordinator 列表，
        注意 users 表格里面有 Role 字段（int）， 1表示student, 2表示tutor, 3表示client, 4表示convenor,
        5表示admin'
      parameters:
      - description: Bearer <token>
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.UserListResponse'
            type: array
        "401":
          description: '{"error": "Please login"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": "only admin have permission to access"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "internal server error, Failed to fetch tutors"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all coordinator List
      tags:
      - Admin
  /v1/admin/get/tutor/{projectId}:
    get:
      description: Get tutor information by project ID
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.TutorInfoResponse'
        "400":
          description: '{"error": Invalid projectId}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "Project not found"}" or "{"error": "Tutor not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get tutor information by project ID
      tags:
      - Admin
  /v1/admin/get/tutor/list:
    get:
      consumes:
      - application/json
      description: '注意 header  Authorization: Bearer <token>, 返回所有 Tutor 列表， 注意 users
        表格里面有 Role 字段（int）， 1表示student, 2表示tutor, 3表示client, 4表示convenor, 5表示admin'
      parameters:
      - description: Bearer <token>
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.UserListResponse'
            type: array
        "401":
          description: '{"error": "Please login"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": "only admin have permission to access"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Failed to fetch tutors"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all tutor List
      tags:
      - Admin
  /v1/admin/get/user/list:
    get:
      consumes:
      - application/json
      description: '注意 header  Authorization: Bearer <token>, 返回所有用户列表， 注意 users 表格里面有
        Role 字段（int）， 1表示student, 2表示tutor, 3表示client, 4表示convenor, 5表示admin'
      parameters:
      - description: Bearer <token>
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.UserListResponse'
            type: array
        "401":
          description: '{"error": "Please login"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": "only admin have permission"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Failed to fetch users"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all users List
      tags:
      - Admin
  /v1/admin/modify/user/role:
    post:
      consumes:
      - application/json
      description: '修改用户的角色信息, 注意header  Authorization: Bearer <token>，如果用户离开队伍且队伍没有其他成员，解散队伍并删除'
      parameters:
      - description: Bearer <token>
        in: header
        name: Authorization
        required: true
        type: string
      - description: User ID, Role, and Notification
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/forms.ModifyUserRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '{"message": "User role updated successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error": "Bad request"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: '{"error": "Please login first"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": ""only admin can change user role""}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Internal server error"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Modify user role
      tags:
      - Admin
  /v1/notification/clear/all/{userId}:
    delete:
      consumes:
      - application/json
      description: Clears all notifications for a user by user ID
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg": "Clear all notifications successfully for the user}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "internal server error"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Clear all notifications for a user
      tags:
      - Notification
  /v1/notification/get/all/{userId}:
    get:
      consumes:
      - application/json
      description: Retrieves all notifications for a user by user ID
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.NotificationResponse'
            type: array
        "500":
          description: '{"error": "internal server error"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all notifications for a user
      tags:
      - Notification
  /v1/project/{projectId}/preferencedBy/{teamId}/detail:
    get:
      description: Get the details of a team that prefer a project
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Team ID
        in: path
        name: teamId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.TeamDetailResponse'
        "404":
          description: '{"error": "Project not found"}" or "{"error": "Team not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get project preferred by team detail
      tags:
      - Project Preference
  /v1/project/create:
    post:
      consumes:
      - multipart/form-data
      description: client 创建一个新的项目并上传文件, this api makes sure only client can create
        the project
      parameters:
      - description: Project Title
        in: formData
        name: title
        required: true
        type: string
      - description: Project Field
        in: formData
        name: field
        required: true
        type: string
      - description: Project Description
        in: formData
        name: description
        required: true
        type: string
      - description: Clinet Email
        in: formData
        name: email
        required: true
        type: string
      - description: Required Skills
        in: formData
        name: requiredSkills[]
        type: string
      - description: upload file
        in: formData
        name: file
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg": "Project created successfully", "projectId": 1, "fileName":
            "filename.pdf", "filePath": "backend/files/filename.pdf", "createdBy":
            1}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: '{"error": "Invalid email"}'
          schema:
            additionalProperties: true
            type: object
        "404":
          description: '{"error": "Client not found"}'
          schema:
            additionalProperties: true
            type: object
        "500":
          description: '{"error": "Failed to save file"} or {"error": "Failed to create
            project"} or {"error": "Failed to find or create skill"} or {"error":
            "Failed to associate skills"}'
          schema:
            additionalProperties: true
            type: object
      summary: Clinet create a new project
      tags:
      - Project
  /v1/project/delete/{projectId}:
    delete:
      description: 根据项目ID删除项目
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '{"success": bool}'
          schema:
            additionalProperties: true
            type: object
        "404":
          description: '{"error": string}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": string}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Delete project
      tags:
      - Project
  /v1/project/detail/{projectId}:
    get:
      description: 根据项目ID获取项目的详细信息
      parameters:
      - description: 项目ID
        in: path
        name: projectId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.ProjectDetailResponse'
        "404":
          description: '{"error": "Project not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Internal Server Error"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get project detail by projectID
      tags:
      - Project
  /v1/project/get/public_project/list:
    get:
      description: is_public 字段 1表示 public， 2 表示未公开, 这里返回的公开的 project 信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.GetProjectListResponse'
            type: array
        "500":
          description: '{"error": string}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get pubilic project list
      tags:
      - Project
  /v1/project/modify/{projectId}:
    post:
      consumes:
      - multipart/form-data
      description: 通过 projectId 修改项目详细信息，并更新项目的 client, this api makes sure Projects
        can only be assigned to clients
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      - description: Project Title
        in: formData
        name: title
        required: true
        type: string
      - description: Client Email
        in: formData
        name: clientEmail
        required: true
        type: string
      - description: Required Skills
        in: formData
        name: requiredSkills[]
        type: string
      - description: Project Field
        in: formData
        name: field
        required: true
        type: string
      - description: Project Description
        in: formData
        name: description
        required: true
        type: string
      - description: Specification File
        in: formData
        name: spec
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.ModifyProjectDetailResponse'
        "400":
          description: '{"error": "File not provided"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: '{"error": "Project can only be assigned to client"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "Project not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": Internal Error}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Modify project detail information
      tags:
      - Project
  /v1/project/preferencedBy/team/{projectId}:
    get:
      description: Get the detail of teams that prefer a given project ID
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.TeamDetailResponse'
            type: array
        "404":
          description: '{"error": "Project not found"}" or "{"error": "Teams not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get teams that prefer a project
      tags:
      - Project Preference
  /v1/project/team/allocated/{projectId}:
    get:
      description: 查看一个 project 被 allocated 的所有 team 的信息
      parameters:
      - description: Project ID
        in: path
        name: projectId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.TeamDetailResponse'
            type: array
        "404":
          description: '{"error": "Project not found"}" or "{"error": "Teams not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get allocated team details
      tags:
      - Project Allocation
  /v1/student/unassigned/list:
    get:
      consumes:
      - application/json
      description: 返回未分配队伍的学生列表，注意 users 表格里面有 Role 字段，1表示student, 2表示tutor, 3表示client,
        4表示convenor, 5表示admin
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.StudentListResponse'
            type: array
        "500":
          description: '{"error": "Failed to fetch users"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all students unassigned list
      tags:
      - Student
  /v1/team/create:
    post:
      consumes:
      - application/json
      description: 创建 team, 并且创建人加入了 team, 后端随机生成 teamName, 存入了数据库
      parameters:
      - description: Create Team form
        in: body
        name: createTeamForm
        required: true
        schema:
          $ref: '#/definitions/forms.CreateTeamForm'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.CreateTeamResponse'
        "400":
          description: '{"error":"User already belongs to a team, cannot create team"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error":"User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to create team"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create a new team
      tags:
      - Team
  /v1/team/get/list:
    get:
      consumes:
      - application/json
      description: Get all teams
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.TeamListResponse'
            type: array
        "500":
          description: '{"error": "Failed to fetch teams"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get Team List
      tags:
      - Team
  /v1/team/get/preferences/{userId}:
    get:
      description: Get the team preferences for a given user
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.PreferenceResponse'
            type: array
        "404":
          description: '{"error": "User not found"}" or {"error": "User does not belong
            to any team"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get team preferences
      tags:
      - Project Preference
  /v1/team/get/student-info/{teamName}:
    get:
      consumes:
      - application/json
      description: Get student list information by team name
      parameters:
      - description: Team Name
        in: path
        name: teamName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.StudentInfoResponse'
            type: array
        "404":
          description: '{"error": "Team not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get student list information by team name
      tags:
      - Team
  /v1/team/invite/{userId}/{teamId}:
    get:
      consumes:
      - application/json
      description: Invite a student to join a team
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      - description: Team ID
        in: path
        name: teamId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '{"message": "User invited to team successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error": "User already belongs to a team"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "User not found"} or gin.H{"error": "Team not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Failed to invite user to team"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Invite User to Team
      tags:
      - Team
  /v1/team/join:
    put:
      consumes:
      - application/json
      description: 用户加入团队
      parameters:
      - description: Join Team form
        in: body
        name: joinTeamForm
        required: true
        schema:
          $ref: '#/definitions/forms.JoinTeamForm'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.JoinTeamResponse'
        "400":
          description: '{"error":"Validation failed"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error":"Team not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: '{"error": "User already belongs to a team"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to update team"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Join a team
      tags:
      - Team
  /v1/team/leave/{userId}:
    delete:
      consumes:
      - application/json
      description: 用户离开团队
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"User has left the team successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"User does not belong to any team"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error":"User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to update user"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Leave a team
      tags:
      - Team
  /v1/team/preference/project/{userId}:
    put:
      consumes:
      - application/json
      description: Update the team preference project for a given user
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      - description: Preferences
        in: body
        name: preferences
        required: true
        schema:
          items:
            $ref: '#/definitions/forms.PreferenceRequest'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated team preferences
          schema:
            type: string
        "400":
          description: '{"error": "body error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "User not found"}" or "{"error": "User does not
            belong to any team"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update team preferences
      tags:
      - Project Preference
  /v1/team/profile/{userId}:
    get:
      consumes:
      - application/json
      description: 获取用户所属团队的信息
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.GetTeamProfileResponse'
        "404":
          description: '{"error":"Team not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get Team Profile
      tags:
      - Team
  /v1/team/project/allocation:
    put:
      consumes:
      - application/json
      description: Allocate a project to a team and send notification to team members
      parameters:
      - description: Project ID
        in: body
        name: projectId
        required: true
        schema:
          type: integer
      - description: Team ID
        in: body
        name: teamId
        required: true
        schema:
          type: integer
      - description: Notification Content and To
        in: body
        name: notification
        required: true
        schema:
          $ref: '#/definitions/forms.TeamNotification'
      produces:
      - application/json
      responses:
        "200":
          description: 'message: Project allocated and notification sent successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 'error: Error message'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 'error: Team not found'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'error: Internal server error'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Agree to allocate a Project to a Team
      tags:
      - Project Allocation
  /v1/team/project/reject:
    put:
      consumes:
      - application/json
      description: 检查团队是否已经被分配了项目，如果已经分配了项目，则取消分配并发送通知
      parameters:
      - description: Project ID
        in: body
        name: projectId
        required: true
        schema:
          type: integer
      - description: Team ID
        in: body
        name: teamId
        required: true
        schema:
          type: integer
      - description: Notification Content and To
        in: body
        name: notification
        required: true
        schema:
          $ref: '#/definitions/forms.TeamNotification'
      produces:
      - application/json
      responses:
        "200":
          description: 'message: Allocation canceled and notification sent successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 'error: Error message'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 'error: Team not found or not allocated'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'error: Internal server error'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Reject a team allocation
      tags:
      - Project Allocation
  /v1/team/update/profile/{teamId}:
    put:
      consumes:
      - application/json
      description: 更新团队的资料和技能
      parameters:
      - description: Team ID
        in: path
        name: teamId
        required: true
        type: string
      - description: Update Team Profile form
        in: body
        name: updateTeamProfileForm
        required: true
        schema:
          $ref: '#/definitions/forms.UpdateTeamProfileForm'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"Updated team profile successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"Validation failed"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error":"Team not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to update team profile"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update Team Profile
      tags:
      - Team
  /v1/user/change_password:
    post:
      consumes:
      - application/json
      description: 修改用户密码
      parameters:
      - description: Change Password form
        in: body
        name: changePasswordForm
        required: true
        schema:
          $ref: '#/definitions/forms.ChangePasswordForm'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"Password updated successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"Original passwords do not match"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error":"User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to connect to user service"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Change Password
      tags:
      - Personal Management
  /v1/user/forget_password/send_email:
    post:
      consumes:
      - application/json
      description: 发送重置密码邮件
      parameters:
      - description: Reset Password form
        in: body
        name: sendEmailResetPwdForm
        required: true
        schema:
          $ref: '#/definitions/forms.SendEmailResetPwdForm'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"Reset password email sent successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"Validation failed"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to send reset password email"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Reset password (send email)
      tags:
      - Personal Management
  /v1/user/modify/profile:
    post:
      consumes:
      - application/json
      description: 更新用户个人信息和技能
      parameters:
      - description: Profile Request
        in: body
        name: profileReq
        required: true
        schema:
          $ref: '#/definitions/forms.ProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"User profile updated successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"Validation failed"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error":"User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to update user profile"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update User Profile
      tags:
      - Personal Management
  /v1/user/profile/{user_id}:
    get:
      consumes:
      - application/json
      description: 获取用户个人信息
      parameters:
      - description: User ID
        in: path
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.ProfileResponse'
        "404":
          description: '{"error":"User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get User Profile
      tags:
      - Personal Management
  /v1/user/pwd_login:
    post:
      consumes:
      - application/json
      description: Authenticate user with email and password, Role 1表示student, 2表示tutor,
        3表示client, 4表示convenor, 5表示admin
      parameters:
      - description: Login Form
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/forms.PasswordLoginForm'
      produces:
      - application/json
      responses:
        "200":
          description: '{"id": int, "username": string, "token": string, "expires_at":
            int64}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error": "Invalid credentials. Please check your email and
            password."}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: '{"error": "User not found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error": "Internal server error. Please try again later."}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: User Login
      tags:
      - Personal Management
  /v1/user/register/send_email:
    post:
      consumes:
      - application/json
      description: 用户注册，发送验证邮件
      parameters:
      - description: Register form
        in: body
        name: registerForm
        required: true
        schema:
          $ref: '#/definitions/forms.RegisterForm'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"Verification email sent successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"Validation failed"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: '{"error": "User already exists"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to send verification email"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: User register（send email）
      tags:
      - Personal Management
  /v1/user/register/verify:
    get:
      consumes:
      - application/json
      description: 验证邮箱，并完成用户注册
      parameters:
      - description: Verification Token
        in: query
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"Register successfully"}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: '{"error":"Invalid or expired token"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to verify token"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: User register (verify email)
      tags:
      - Personal Management
  /v1/user/reset/password:
    post:
      consumes:
      - application/json
      description: 重置用户密码
      parameters:
      - description: Reset Password form
        in: body
        name: resetPasswordForm
        required: true
        schema:
          $ref: '#/definitions/forms.ResetPasswordForm'
      produces:
      - application/json
      responses:
        "200":
          description: '{"msg":"Password reset successfully"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: '{"error":"Invalid or expired token"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: '{"error":"Failed to reset password"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Reset Password
      tags:
      - Personal Management
  /v1/user/student/list:
    get:
      consumes:
      - application/json
      description: 返回所有学生列表， 注意 users 表格里面有 Role 字段， 1表示student, 2表示tutor, 3表示client,
        4表示convenor, 5表示admin
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.StudentListResponse'
            type: array
        "500":
          description: '{"error": "Failed to fetch users"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all students List
      tags:
      - Personal Management
swagger: "2.0"
